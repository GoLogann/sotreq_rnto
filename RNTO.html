<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Relatório de Serviço</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .header {
      border: 2px solid #000;
      padding: 10px;
    }
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .header-top img {
      height: 80px;
    }
    .header-title {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      text-transform: uppercase;
    }
    .header-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 12px;
    }
    .header-table td, .header-table th {
      border: 1px solid #000;
      padding: 4px;
    }
    .section {
      border: 1px solid #000;
      margin-top: 20px;
      padding: 10px;
    }
    .section h3 {
      margin-top: 0;
      background: #f0f0f0;
      padding: 5px;
      font-size: 14px;
    }
    textarea, input, select {
      width: 100%;
      box-sizing: border-box;
      font-size: 12px;
      padding: 4px;
    }
    table.repair-table, table.repair-table td, table.repair-table th {
      border: 1px solid #000;
      border-collapse: collapse;
      font-size: 12px;
      padding: 4px;
    }
    table.repair-table {
      width: 100%;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <!-- Cabeçalho -->
  <div class="header">
    <div class="header-top">
      <img src="logo_sotreq.jpg" alt="Logo Sotreq">
      <div class="header-title">RNTO - RELATÓRIO DE NOTAS TÉCNICAS DO ORÇAMENTO</div>
      <img src="Cat.png" alt="Logo CAT">
    </div>

    <table class="header-table">
      <tr>
        <td>Cód./Rev.</td>
        <td><input type="text"></td>
        <td>Nº OS</td>
        <td><input type="text"></td>
        <td>Cliente</td>
        <td><input type="text"></td>
      </tr>
      <tr>
        <td>Data</td>
        <td><input type="date"></td>
        <td>Nome do Técnico</td>
        <td><input type="text"></td>
        <td>Nível</td>
        <td><input type="text"></td>
      </tr>
      <tr>
        <td>Contato</td>
        <td><input type="text"></td>
        <td>Modelo</td>
        <td><input type="text"></td>
        <td>Prefixo</td>
        <td><input type="text"></td>
      </tr>
      <tr>
        <td>Série</td>
        <td colspan="5"><input type="text"></td>
      </tr>
    </table>

    <!-- SIMS / Peça Causadora da Falha agora faz parte do cabeçalho -->
    <h3>SIMS / Peça Causadora da Falha</h3>
    <table class="repair-table">
      <tr>
        <th>Nº da Peça</th>
        <th>Cod. Descrição da Falha</th>
        <th>Qtd.</th>
        <th>SMCS Code</th>
        <th>Grupo Part Number</th>
        <th>Comentários adicionais</th>
      </tr>
      <tr>
        <td><input type="text"></td>
        <td>
          <select>
            <option>SELECIONAR</option>
            <option>00 NÃO FORNECIDO</option>
            <option>01 CORROÍDO/LASCADO</option>
            <option>02 RISCADO/ENTALHADO</option>
            <option>03 ENFERRUJADO/CORROÍDO</option>
            <option>04 PROBLEMA DE METALIZAÇÃO</option>
            <option>05 ÁSPERO OU IRREGULAR</option>
            <option>06 PINTURA INSATISFATÓRIA</option>
            <option>07 TRANSFERÊNCIA DE MATERIAL</option>
            <option>08 ACIDENTE OU ABUSO</option>
            <option>09 CONDENSAÇÃO</option>
            <option>10 QUEBRADO</option>
            <option>11 TRINCADO</option>
            <option>12 EMPENADO OU TORCIDO</option>
            <option>13 DESGASTADO</option>
            <option>14 DOBRADO OU AFUNDADO</option>
            <option>15 ROMPIDO/RASGADO</option>
            <option>16 VAZA AR OU GASES</option>
            <option>17 VAZA ÓLEO OU LUBRIFICANTE</option>
            <option>18 VAZA ÁGUA</option>
            <option>19 VAZA COMBUSTÍVEL</option>
            <option>20 RECLAMAÇÃO ADICIONAL</option>
            <option>21 ROSCAS ESPANADAS</option>
            <option>22 FERRAGEM SOLTA OU FALTANTE</option>
            <option>23 SEPARADO</option>
            <option>24 ESTICADO</option>
            <option>25 CORTADO</option>
            <option>26 MACHUCADO</option>
            <option>27 FALHA DE SOLDA</option>
            <option>28 COMPLT CLA CLAIM</option>
            <option>29 NÍVEL ERRADO DE FLUIDO</option>
            <option>30 FLUIDO ERRADO</option>
            <option>31 EM CURTO-CIRCUITO</option>
            <option>32 CIRCUITO ABERTO</option>
            <option>33 CÉLULA INATIVA</option>
            <option>34 TERMINAL DANIFICADO</option>
            <option>35 SOBRECARGA</option>
            <option>36 BAIXA CARGA</option>
            <option>37 DEFEITO DE SOFTWARE</option>
            <option>38 REGISTRO DE INFORMAÇÃO</option>
            <option>40 REVISÃO MANUAL</option>
            <option>41 FALHA NO TESTE DE CARGA DE PART.</option>
            <option>42 MAU FUNCIONAMENTO DO SISTEMA</option>
            <option>43 HESITAÇÃO</option>
            <option>44 TROCA DE MARCHA IRREGULAR</option>
            <option>45 DIFÍCIL DE ENGATAR</option>
            <option>46 DESCARREGA-SE</option>
            <option>47 FREIA COM DIFICULDADE</option>
            <option>48 DIREÇÃO DIFÍCIL</option>
            <option>49 REPARO GERAL</option>
            <option>50 POLÍTICA/MCEP</option>
            <option>51 AGARRA OU PRENDE</option>
            <option>52 RUIDOSO</option>
            <option>53 SUPERAQUECIMENTO</option>
            <option>54 VIBRA, TREME</option>
            <option>55 FAZ MUITA FUMAÇA</option>
            <option>56 SOLICITAÇÃO DA FÁBRICA</option>
            <option>57 TAMPADO, CONFINADO</option>
            <option>58 SOLTO OU DESLIZANTE</option>
            <option>59 MAU ASSENTAMENTO</option>
            <option>60 IMPOSSÍVEL DE AJUSTAR</option>
            <option>61 SUBSTITUIÇÃO DE COMPONENTE</option>
            <option>62 SUJEIRA OU MATERIAL ESTRANHO</option>
            <option>63 CONSUMO EXCESSIVO DE ÓLEO</option>
            <option>64 FLUTUA</option>
            <option>65 PRESSÃO MUITO ALTA</option>
            <option>66 PRESSÃO MUITO BAIXA</option>
            <option>67 UMEDECE</option>
            <option>68 PRESSÃO EXCESSIVA NO CÁRTER</option>
            <option>69 SEM PRESSÃO</option>
            <option>70 DIFÍCIL DE DAR PARTIDA</option>
            <option>71 TEMPO DE CICLO ERRADO</option>
            <option>72 BAIXA POTÊNCIA</option>
            <option>73 OPERAÇÃO IRREGULAR</option>
            <option>74 M.C.E.P.</option>
            <option>75 COMPONENTE OEM DO TIPO II</option>
            <option>76 EMBALAGEM</option>
            <option>77 EXCESSO DE ROTAÇÃO</option>
            <option>78 DANO DISSIMULADO</option>
            <option>79 INTERFERÊNCIA</option>
            <option>80 DIFÍCIL DE ACESSAR</option>
            <option>81 OPERAÇÃO OMITIDA</option>
            <option>82 PEÇA ERRADA OU FALTANTE</option>
            <option>83 SOLDA INSATISFATÓRIA</option>
            <option>84 MUITO GRANDE OU COMPRIDO</option>
            <option>85 MUITO PEQUENO OU CURTO</option>
            <option>86-QUEBRADICO, MUITO DURO</option>
            <option>87 MUITO MOLE</option>
            <option>88 NÃO REDONDO /FORA DE CENTRO</option>
            <option>89 LUBRIFICANTE INAPROPRIADO</option>
            <option>90 DEFEITO DE FUNDIÇÃO</option>
            <option>91 AJUSTAGEM INAPROPRIADA</option>
            <option>92 USINAGEM DEFICIENTE</option>
            <option>93 MAL POSICIONADO</option>
            <option>94 DANOS DE TRANSPORTE</option>
            <option>95 DANO DE MONTAGEM</option>
            <option>96 PROGRAMA DE SUPORTE AO PRODU</option>
            <option>97 EMISSÕES</option>
            <option>98 RECLAMAÇÃO SUPLEMENTAR</option>
            <option>99 DEFEITO INDEFINIDO</option>
            <option>NS-NÃO FORNECIDO</option>
            <option>RD-DANO RESULTANTE</option>
          </select>
        </td>
        <td><input type="number" min="1"></td>
    <td><input type="number" min="1" style="width:60px;"></td>
        <td><input type="text"></td>
        <td><input type="text"></td>
        <td><input type="text"></td>
      </tr>
    </table>
    <label>Instruções para execução de serviço</label>
    <textarea rows="4"></textarea>
  </div>

  <!-- Corpo: Histórico do Reparo -->
  <div class="section">
    <h3>Histórico do Reparo</h3>
    <label>Reclamação do Cliente</label>
    <textarea rows="3"></textarea>
    <label>Causa das falhas</label>
    <textarea rows="3"></textarea>
    <label>Dano Resultante</label>
    <textarea rows="3"></textarea>
    <label>Comentários sobre o Processo de Reparo</label>
    <textarea rows="3"></textarea>
  </div>

   
 <!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Relatório de Serviço</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  .section { margin-bottom: 20px; }
  #photoGallery img { width: 150px; height: auto; border: 1px solid #ccc; padding: 5px; position: relative; }
  .photo-container { position: relative; display: inline-block; }
  .delete-btn { position: absolute; top: 2px; right: 2px; background: red; color: white; border: none; cursor: pointer; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; }
</style>
</head>
<body>

  <!-- Área de Fotos -->
  <div class="section">
    <h3>Fotos do Serviço</h3>
    <input type="file" id="photoUpload" multiple accept="image/jpeg,image/png,image/webp,image/bmp">
    <div id="photoGallery" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;"></div>
  </div>

  <!-- Botões Extras -->
  <div class="section">
    <h3>Ações</h3>
    <button onclick="saveReport()">Salvar PDF</button>
    <button onclick="sendEmail()">Enviar por E-mail</button>
  </div>

<script>
const photoUpload = document.getElementById('photoUpload');
const photoGallery = document.getElementById('photoGallery');
let photos = [];

photoUpload.addEventListener('change', (e) => {
  const files = Array.from(e.target.files);
  files.forEach(file => {
    const reader = new FileReader();
    reader.onload = function(event) {
      const imgContainer = document.createElement('div');
      imgContainer.classList.add('photo-container');

      const img = document.createElement('img');
      img.src = event.target.result;
      imgContainer.appendChild(img);

      const btnDelete = document.createElement('button');
      btnDelete.innerText = '×';
      btnDelete.classList.add('delete-btn');
      btnDelete.onclick = () => {
        photoGallery.removeChild(imgContainer);
        photos = photos.filter(p => p !== file);
      };
      imgContainer.appendChild(btnDelete);

      photoGallery.appendChild(imgContainer);
      photos.push(file);
    };
    reader.readAsDataURL(file);
  });
});

// Função para gerar PDF
async function saveReport() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("Relatório de Serviço", 10, 20);

  let y = 30;
  for (let i = 0; i < photos.length; i++) {
    const img = await fileToDataURL(photos[i]);
    doc.addImage(img, 'JPEG', 10, y, 60, 45); // ajustar tamanho
    y += 50;
    if (y > 270) {
      doc.addPage();
      y = 20;
    }
  }

  doc.save("relatorio_servico.pdf");
}

// Converter File para DataURL
function fileToDataURL(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = e => resolve(e.target.result);
    reader.onerror = e => reject(e);
    reader.readAsDataURL(file);
  });
}

// Função para enviar por email (abrindo cliente padrão)
function sendEmail() {
  saveReport(); // opcional: gerar PDF primeiro
  setTimeout(() => {
    window.location.href = "mailto:?subject=Relatório de Serviço&body=Segue o relatório em anexo.";
  }, 500); // espera PDF ser gerado
}
</script>

</body>
</html>


